<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/document/Dom.js - wakegi.js API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="wakegi.js API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Android.html">Android</a></li>
            
                <li><a href="../classes/Browser.html">Browser</a></li>
            
                <li><a href="../classes/Chrome.html">Chrome</a></li>
            
                <li><a href="../classes/CriOS.html">CriOS</a></li>
            
                <li><a href="../classes/Css3.html">Css3</a></li>
            
                <li><a href="../classes/Dataset.html">Dataset</a></li>
            
                <li><a href="../classes/Dom.html">Dom</a></li>
            
                <li><a href="../classes/Edge.html">Edge</a></li>
            
                <li><a href="../classes/Element.html">Element</a></li>
            
                <li><a href="../classes/Firefox.html">Firefox</a></li>
            
                <li><a href="../classes/FxiOS.html">FxiOS</a></li>
            
                <li><a href="../classes/IE.html">IE</a></li>
            
                <li><a href="../classes/iOS.html">iOS</a></li>
            
                <li><a href="../classes/Iro.html">Iro</a></li>
            
                <li><a href="../classes/Mac.html">Mac</a></li>
            
                <li><a href="../classes/Mobile.html">Mobile</a></li>
            
                <li><a href="../classes/Patterns.html">Patterns</a></li>
            
                <li><a href="../classes/Safari.html">Safari</a></li>
            
                <li><a href="../classes/Touch.html">Touch</a></li>
            
                <li><a href="../classes/Transform.html">Transform</a></li>
            
                <li><a href="../classes/Transition.html">Transition</a></li>
            
                <li><a href="../classes/Util.html">Util</a></li>
            
                <li><a href="../classes/Windows.html">Windows</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Android.html">Android</a></li>
            
                <li><a href="../modules/Browser.html">Browser</a></li>
            
                <li><a href="../modules/Chrome.html">Chrome</a></li>
            
                <li><a href="../modules/CriOS.html">CriOS</a></li>
            
                <li><a href="../modules/Css3.html">Css3</a></li>
            
                <li><a href="../modules/Dataset.html">Dataset</a></li>
            
                <li><a href="../modules/Dom.html">Dom</a></li>
            
                <li><a href="../modules/Edge.html">Edge</a></li>
            
                <li><a href="../modules/Element.html">Element</a></li>
            
                <li><a href="../modules/Firefox.html">Firefox</a></li>
            
                <li><a href="../modules/FxiOS.html">FxiOS</a></li>
            
                <li><a href="../modules/IE.html">IE</a></li>
            
                <li><a href="../modules/iOS.html">iOS</a></li>
            
                <li><a href="../modules/Iro.html">Iro</a></li>
            
                <li><a href="../modules/Mac.html">Mac</a></li>
            
                <li><a href="../modules/Mobile.html">Mobile</a></li>
            
                <li><a href="../modules/Patterns.html">Patterns</a></li>
            
                <li><a href="../modules/Safari.html">Safari</a></li>
            
                <li><a href="../modules/Touch.html">Touch</a></li>
            
                <li><a href="../modules/Transform.html">Transform</a></li>
            
                <li><a href="../modules/Transition.html">Transition</a></li>
            
                <li><a href="../modules/Util.html">Util</a></li>
            
                <li><a href="../modules/wakegi.html">wakegi</a></li>
            
                <li><a href="../modules/Windows.html">Windows</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/document/Dom.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * license inazumatv.com
 * author (at)taikiken / http://inazumatv.com
 * date 2015/04/02 - 20:40
 *
 * Copyright (c) 2011-2015 inazumatv.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 *
 */

/**
 * HTMLElement へ class を追加・削除・存在確認を行います
 *
 * @module wakegi
 * @submodule Dom
 *
 * */

(function(window) {
  &#x27;use strict&#x27;;

  var
    wakegi = window.wakegi,
    Patterns = wakegi.Patterns;

  /**
   * HTML Element style / class を操作します
   * @class Dom
   * @static
   * @constructor
   * @param {HTMLElement} element 操作対象 Element
   */
  function Dom(element) {
    /**
     * @property element
     * @type {HTMLElement}
     * @private
     */
    this.element = element;
  }

  var p = Dom.prototype;
  p.constructor = Dom;

  // /**
  //  * 使用 Element を返します
  //  * @method element
  //  * @return {HTMLElement}
  //  */
  // p.element = function() {
  //   return this.element;
  // };
  /**
   * CSS class が存在するかを調べます
   * @method hasClass
   * @param {string} className 調査する class name
   * @return {boolean} true CSS class が存在する
   */
  p.hasClass = function( className ) {
    return Dom.hasClass(this.element, className);
  };
  /**
   * @method addClass
   * @param {string} className 対象 class 名称
   * @return {boolean} true: 追加成功
   */
  p.addClass = function( className ) {
    return Dom.addClass(this.element, className);
  };
  /**
   * @method removeClass
   * @param {string} className 対象 class 名称
   * @return {boolean} true: 削除成功
   */
  p.removeClass = function( className ) {
    return Dom.removeClass(this.element, className);
  };
  /**
   * element の 指定 css property 値を取得します
   * @method style
   * @param {string} [styleProp=&#x27;&#x27;] css property name
   * @return {*} CSS 値
   */
  p.style = function(styleProp) {
    return Dom.getStyle(this.element, styleProp);
  };
  /**
   * CSS class が存在するかを調べます
   * @method hasClass
   * @static
   * @param {HTMLElement} element 操作対象 Element
   * @param {string} className 調査する class name
   * @return {boolean} true: 存在する
   */
  Dom.hasClass = function( element, className ) {
    // categoryX があって category で検索すると match するのまずい
    // return !!element.className.match( new RegExp( className, &#x27;i&#x27; ) );
    // return !!element.className.match( new RegExp( &#x27;^&#x27; + className + &#x27;$&#x27;, &#x27;g&#x27; ) );
    // return !!element.className.match( new RegExp( &#x27;\\&#x27; + className + &#x27;\\w&#x27;, &#x27;g&#x27; ) );
    var
      elementClass = element.className,
      classes = elementClass.split( &#x27; &#x27; );

    return classes.indexOf( className ) !== -1;
  };
  /**
   * css class を追加します
   * @method addClass
   * @static
   * @param {HTMLElement} element 操作対象 Element
   * @param {string} className 追加する class name
   * @return {boolean} true: 追加した
   */
  Dom.addClass = function( element, className ) {
    var
      names = &#x27;&#x27;,
      result = false,
      space;

    if (!Dom.hasClass(element, className)) {
      // 追加 className が not found
      space = &#x27;&#x27;;
      names = element.className;

      if (names !== &#x27;&#x27;) {
        // 既に class 設定されているので 1 space を付与する
        space = &#x27; &#x27;;
      }

      names += space + className;
      names = names.split( &#x27;  &#x27; ).join( &#x27; &#x27; );
      element.className = names;
      result = true;
    }

    return result;
  };
  /**
   * element から class を削除します
   * @method removeClass
   * @static
   * @param {HTMLElement} element 操作対象 Element
   * @param {string} className 削除対象 class name
   * @return {boolean} true: 削除した
   */
  Dom.removeClass = function( element, className ) {
    var
      result = false,
      names,
      elementClass,
      classes,
      i, limit,
      currentClass;

    if ( !Dom.hasClass( element, className ) ) {
      return result;
    }

    // @type {string}
    elementClass = element.className;
    // @type {array&lt;string&gt;}
    classes = elementClass.split( &#x27; &#x27; );
    for (i = 0, limit = classes.length; i &lt; limit; i = (i + 1) | 0) {
      currentClass = classes[i];
      if (!currentClass) {
        continue;
      }
      if (currentClass === className) {
        result = true;
        classes[i] = &#x27;XXX_XXX_XXX&#x27;;
      }
    }
    // XXX_XXX_XXX を削除して 2 spaces を 1 space へ
    names = classes.join(&#x27; &#x27;).replace(&#x27;XXX_XXX_XXX&#x27;, &#x27;&#x27;).split(&#x27;  &#x27;).join(&#x27; &#x27;);
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim
    // remove, start / last white space
    names = names.trim();
    element.className = names;
    return result;
  };
  /**
   * getComputedStyle を使い HTMLElement style value を取得します
   * @method styleCompute
   * @static
   * @param {Object} defaultView &#x60;defaultView.getComputedStyle&#x60; します
   * @param {HTMLElement} el 調査対象 Element
   * @param {string} [styleProp] CSS property name
   * @return {CSSStyleDeclaration|*|String}
   *    styleProp が null or undefined or &quot;&quot; の時は CSSStyleDeclaration Object&lt;br&gt;
   *    指定されている時は CSS 設定値(string)を返します
   */
  Dom.styleCompute = function( defaultView, el, styleProp ) {
    var
      style = defaultView.getComputedStyle( el, null );

    if ( !!styleProp ) {
      styleProp = styleProp.replace( /([A-Z])/g, &#x27;-$1&#x27; ).toLowerCase();
      return style.getPropertyValue( styleProp );
    }
    return style;
  };
  /**
   * currentStyle を使い HTMLElement style value を取得します
   * @method styleCurrent
   * @static
   * @param {HTMLElement} el 調査対象 Element
   * @param {string} [styleProp] CSS property name
   * @return {*} HTMLElement style value を返します
   */
  Dom.styleCurrent = function( el, styleProp ) {
    var
      style = el.currentStyle,
      value;

    if (!!styleProp) {
      // IE
      // sanitize property name to camelCase
      styleProp = styleProp.replace(/\-(\w)/g, function( str, letter ) {
        return letter.toUpperCase();
      });

      value = style[styleProp];

      // convert other units to pixels on IE
      if (/^\d+(em|pt|%|ex)?$/i.test(value)) {
        // return (function() {
        //   var
        //     oldLeft = el.style.left,
        //     oldRsLeft = el.runtimeStyle.left;
        //
        //   el.runtimeStyle.left = el.currentStyle.left;
        //   el.style.left = value || 0;
        //   value = el.style.pixelLeft + &#x27;px&#x27;;
        //   el.style.left = oldLeft;
        //   el.runtimeStyle.left = oldRsLeft;
        //
        //   return value;
        // })();
        return Dom.styleValue(el, value);
      }
      return value;
    }
    return style;
  };
  /**
   * HTMLElement style value を取得します
   * @param {HTMLElement} el 調査対象 Element
   * @param {*} value CSS 値
   * @return {string|*} HTMLElement style value を返します
   */
  Dom.styleValue = function(el, value) {
    var
      oldLeft = el.style.left,
      oldRsLeft = el.runtimeStyle.left;

    el.runtimeStyle.left = el.currentStyle.left;
    el.style.left = value || 0;
    value = el.style.pixelLeft + &#x27;px&#x27;;
    el.style.left = oldLeft;
    el.runtimeStyle.left = oldRsLeft;

    return value;
  };

  /**
   * CSS 値を取得します
   * @method shortHand
   * @static
   * @param {Object} defaultView &#x60;defaultView.getComputedStyle&#x60; します
   * @param {HTMLElement} el 調査対象 HTML tag
   * @param {Array} patterns [string, ...]
   * @return {string} CSS 値を返します
   */
  Dom.shortHand = function(defaultView, el, patterns) {
    var
      top = Dom.styleCompute(defaultView, el, patterns[0]),
      right = Dom.styleCompute(defaultView, el, patterns[1]),
      bottom = Dom.styleCompute(defaultView, el, patterns[2]),
      left = Dom.styleCompute(defaultView, el, patterns[3]),
      result = &#x27;&#x27;;

    if (top === bottom) {
      if (right === left) {
        if (top === right) {
          result = top;
        } else {
          result = top + &#x27; &#x27; + right;
        }
      } else {
        result = top + &#x27; &#x27; + right + &#x27; &#x27; + bottom + &#x27; &#x27; + left;
      }
    } else {
      if (right === left) {
        result = top + &#x27; &#x27; + right + &#x27; &#x27; + bottom;
      } else {
        result = top + &#x27; &#x27; + right + &#x27; &#x27; + bottom + &#x27; &#x27; + left;
      }
    }
    return result;
  };
  /**
   * HTMLElement の css style を取得します
   *
   * @TODO: background していない時の background-color が rgb(0, 0, 0) になるのを解決する
   * @method getStyle
   * @static
   * @param {HTMLElement} el 調査対象 HTML tag
   * @param {string} [styleProp] CSS property name
   * @return {*} HTMLElement の css style を返します
   */
  Dom.getStyle = function(el, styleProp) {
    var
      ownerDocument = el.ownerDocument,
      defaultView,
      result;

    if (!!ownerDocument) {
      defaultView = ownerDocument.defaultView;
    }

    if (!!defaultView &amp;&amp; !!defaultView.getComputedStyle) {
      result = Dom.styleCompute(defaultView, el, styleProp);

      // Firefox, shorthand css property が常に空になる
      // 再計算を行う
      if (result === &#x27;&#x27; &amp;&amp; !!styleProp &amp;&amp; Patterns.has(styleProp)) {
        result = Dom.shortHand(defaultView, el, Patterns.get(styleProp));
      }
    } else if (!!el.currentStyle) {
      result = Dom.styleCurrent(el, styleProp);
    }
    return result;
  };
  wakegi.Dom = Dom;
}(window));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
